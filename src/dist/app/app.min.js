function getAppConstants(){return{APP_NAME:"travelPriceEngineApp",URL_get_airports:"/airports",URL_get_fares:"/fares",URL_GET_STATISTICS:"/appStatistics",LOCATION_NOT_SELECTED_ERROR_MESSAGE:"Origin and/or destination not selected. Please select origin and destination.",FARE_DATA_NOT_AVAILABLE_ERROR:"Fares data not available or selected origin and destination.",LABEL_CLIENT_ERROR:"Total Client Errors (4xx)",LABEL_SERVER_ERROR:"Total Server Errors (4xx)",LABEL_RESPONSE_OK:"Total Responses OK (200)",LABEL_AVERAGE_RESPONSE_TIME:"Average Response Time of All Requests",LABEL_MIN_RESPONSE_TIME:"Minimum Response Time of All Requests",LABEL_MAX_RESPONSE_TIME:"Maximum Response Time of All Requests",LABEL_TOTAL_REQUESTS_PROCESSED:"Total Requests Processed"}}function AirportsService(a,b){function c(){(angular.isUndefined(e)||angular.isArray(e)&&!e.length)&&(e=[]),a(b.URL_get_airports,{},{query:{method:"GET"}}).query().$promise.then(function(a){a&&a._embedded&&a._embedded.locations&&(e=a._embedded.locations)}).catch(function(a){console.log("error occured while retrieving airports",a)})}function d(){return e}var e,f=this;f.getAirports=d,f.updateAirportsData=c}function DataService(){function a(){return c||[]}function b(a){c=a}var c,d=this;d.getFareData=a,d.setFareData=b}function FaresService(a,b){function c(c,d){return a(b.URL_get_fares+"/:origin/:destination",{origin:"@origin",destination:"@destination"},{query:{method:"GET"}})}this.getFareResource=c}function StatisticsDataService(a,b){function c(){return a(b.URL_GET_STATISTICS,{},{query:{method:"GET"}})}function d(a){return a?f[a]:""}var e=this;e.getStatisticsResource=c,e.getPropertyLabel=d;var f={"total.client.error":b.LABEL_CLIENT_ERROR,"requests.min.response.time":b.LABEL_MIN_RESPONSE_TIME,"total.requests.ok":b.LABEL_RESPONSE_OK,"total.server.error":b.LABEL_SERVER_ERROR,"total.requests.processed":b.LABEL_TOTAL_REQUESTS_PROCESSED,"requests.average.response.time":b.LABEL_AVERAGE_RESPONSE_TIME,"requests.max.response.time":b.LABEL_MAX_RESPONSE_TIME}}function AppController(a){function b(){g.fare=!1,g.airports=!1,g.metrics=!1,g.showLandingPage=!0,a.updateAirportsData()}function c(){g.fare=!1,g.airports=!1,g.metrics=!1,g.showLandingPage=!0}function d(){g.airports&&(g.airports=!1),g.metrics&&(g.metrics=!1),g.showLandingPage=!1,g.fare=!0}function e(){g.fare&&(g.fare=!1),g.metrics&&(g.metrics=!1),g.showLandingPage=!1,g.airports=!0}function f(){g.fare&&(g.fare=!1),g.airports&&(g.airports=!1),g.showLandingPage=!1,g.metrics=!0}var g=this;g.getFares=d,g.getAirports=e,g.metricsData=f,g.showHome=c,b()}function LocationSelectorController(a){function b(){c.airportList=a.getAirports()}var c=this;b()}function AirportListController(a,b){var c=this;c.airports=a.getAirports(),c.airportsTable=new b({count:10},{dataset:c.airports})}function FareDetailsController(a,b,c){function d(){g.showResultPanel=!1,g.airportList=c.getAirports(),g.showError=!1,g.locations={}}function e(){angular.isDefined(g.origin)&&angular.isDefined(g.destination)&&angular.isDefined(g.origin.code)&&angular.isDefined(g.destination.code)?(g.showError&&(g.showError=!1),f()):(g.showError=!0,g.errorMessage=b.LOCATION_NOT_SELECTED_ERROR_MESSAGE)}function f(){a.getFareResource().query({origin:g.origin.code,destination:g.destination.code}).$promise.then(function(a){g.faresData=a,g.showResultPanel=!0,g.showError&&(g.showError=!1)}).catch(function(){g.errorMessage=b.FARE_DATA_NOT_AVAILABLE_ERROR,g.showError=!0,g.showResultPanel=!1})}var g=this;g.getFare=e,d()}function StatisticDataController(a){function b(){a.getStatisticsResource().query().$promise.then(function(b){console.log(b),b&&Object.keys(b).forEach(function(d){var e=a.getPropertyLabel(d);if(e&&e.length){var f={key:e,value:b[d]};c.statistics.push(f)}})}).catch(function(a){console.log("error occured while retrieving metrics.",a)})}var c=this;c.statistics=[],b()}var app=angular.module("travelPriceEngineApp",["ngRoute","ngResource","ui.select","ngSanitize","ngTable"]);app.config(["$routeProvider",function(a){a.when("/",{templateUrl:"index.html",controller:"travelPriceEngineController"}).otherwise({redirectTo:"/"})}]),app.constant("ConfigurationService",getAppConstants()),app.service("AirportsService",AirportsService),AirportsService.$inject=["$resource","ConfigurationService"],app.service("DataService",DataService),app.service("FaresService",FaresService),FaresService.$inject=["$resource","ConfigurationService"],app.service("StatisticsDataService",StatisticsDataService),StatisticsDataService.$inject=["$resource","ConfigurationService"],app.controller("AppController",AppController),AppController.$inject=["AirportsService"],app.component("locationSelector",{templateUrl:"app/components/location-selector/location-selector.template.html",controller:"LocationSelectorController",controllerAs:"locationSelectorController",bindings:{selectedLocation:"="}}),app.controller("LocationSelectorController",LocationSelectorController),LocationSelectorController.$inject=["AirportsService"],app.controller("AirportListController",AirportListController),AirportListController.$inject=["AirportsService","NgTableParams"],app.controller("FareDetailsController",FareDetailsController),FareDetailsController.$inject=["FaresService","ConfigurationService","AirportsService"],app.controller("StatisticDataController",StatisticDataController),StatisticDataController.$inject=["StatisticsDataService"];